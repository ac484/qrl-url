---

# ğŸ¯ ç›®æ¨™ï¼ˆå¾ˆå…·é«”ï¼‰

åœ¨
`/dashboard` é é¢
**å³æ™‚é¡¯ç¤º QRL/USDT çœŸå¯¦åƒ¹æ ¼ï¼ˆä¾†è‡ª MEXC WS / RESTï¼‰**

---

# ğŸ§  æ•´é«”è³‡æ–™æµï¼ˆå…ˆçœ‹é€™å€‹ï¼‰

```
MEXC WS / REST
   â†“
infrastructure (mexc_ws_client)
   â†“
application.market.get_qrl_price
   â†“
interfaces.http.dashboard_routes
   â†“
HTML template (index.html)
```

ğŸ‘‰ **Domain (`QrlPrice`) åªè² è²¬ã€Œæ­£ç¢ºçš„åƒ¹æ ¼ã€
ğŸ‘‰ Interfaces æ‰è² è²¬ã€Œæ€éº¼é¡¯ç¤ºã€**

---

# â‘  Applicationï¼šå–å¾—ã€ŒQRL çœŸå¯¦åƒ¹æ ¼ã€

## ğŸ“ æ–°å¢ï¼ˆæˆ–ä½ å·²æœ‰ market use case å¯èª¿æ•´ï¼‰

```
application/market/qrl/get_qrl_price.py
```

```python
from domain.value_objects.qrl_price import QrlPrice


class GetQrlPrice:
    def __init__(self, exchange_gateway):
        self._exchange = exchange_gateway

    async def execute(self) -> QrlPrice:
        raw_price = await self._exchange.get_ticker_price("QRLUSDT")
        return QrlPrice(raw_price)
```

ğŸ“Œ é‡é»ï¼š

* **é€™è£¡ç¬¬ä¸€æ¬¡ã€Œç”¢ç”Ÿ QrlPriceã€**
* ä¹‹å¾Œä»»ä½•å±¤éƒ½ä¸èƒ½å†äº‚ç”¨ Decimal

---

# â‘¡ Infrastructureï¼šå¾ MEXC æ‹¿åƒ¹æ ¼ï¼ˆä½ å…¶å¯¦å·²ç¶“æœ‰ï¼‰

ä½ å·²ç¶“æœ‰ï¼š

```
infrastructure/exchange/mexc/
 â”œâ”€ rest_client.py
 â””â”€ ws_client.py
```

åªè¦ç¢ºä¿å…¶ä¸­æœ‰é¡ä¼¼é€™å€‹æ–¹æ³•å³å¯ï¼š

```python
async def get_ticker_price(self, symbol: str) -> str:
    # å›å‚³ "0.1234"
```

ğŸ“Œ **ä¸ç”¨æ”¹ WS çµæ§‹**
ğŸ“Œ **ä¸ç”¨å‹• proto**

---

# â‘¢ Interfacesï¼šæŠŠåƒ¹æ ¼é€é€²é é¢ï¼ˆé—œéµï¼‰

## ğŸ“ `dashboard_routes.py`

ä½ ç¾åœ¨ä¸€å®šæœ‰é¡ä¼¼ï¼š

```python
@router.get("/dashboard")
async def dashboard():
    return templates.TemplateResponse("dashboard/index.html", {...})
```

### âœ¨ æ”¹æˆé€™æ¨£ï¼ˆé‡é»ï¼‰

```python
from application.market.qrl.get_qrl_price import GetQrlPrice

@router.get("/dashboard")
async def dashboard(request: Request):
    use_case = GetQrlPrice(exchange_gateway)
    qrl_price = await use_case.execute()

    return templates.TemplateResponse(
        "dashboard/index.html",
        {
            "request": request,
            "qrl_price": str(qrl_price),  # â† é—œéµ
        },
    )
```

ğŸ“Œ **é€™è£¡åªåšä¸€ä»¶äº‹**ï¼š
ğŸ‘‰ æŠŠ `QrlPrice` è½‰æˆå­—ä¸²ï¼Œäº¤çµ¦ HTML

---

# â‘£ HTMLï¼šé¡¯ç¤ºåƒ¹æ ¼ï¼ˆä½ å·²ç¶“ 90% æœ‰äº†ï¼‰

## ğŸ“ `templates/dashboard/index.html`

```html
<h2>QRL / USDT</h2>
<div class="price">
  {{ qrl_price }}
</div>
```

é€™æ¨£ä¸€åˆ·æ–°é é¢ï¼Œä½ å°±æœƒçœ‹åˆ°**çœŸå¯¦åƒ¹æ ¼**ã€‚

---

# â‘¤ï¼ˆå¼·çƒˆå»ºè­°ï¼‰å³æ™‚æ›´æ–°ï¼šWebSocket æ¨é€

å¦‚æœä½ è¦ã€Œä¸æ˜¯åˆ·æ–°ï¼Œè€Œæ˜¯è·³å‹•åƒ¹æ ¼ã€ğŸ‘‡

## ğŸ“ `interfaces/http/api/ws_routes.py`

```python
@router.websocket("/ws/qrl-price")
async def qrl_price_ws(ws: WebSocket):
    await ws.accept()

    while True:
        price = await get_qrl_price_use_case.execute()
        await ws.send_json({"price": str(price)})
        await asyncio.sleep(1)
```

---

## ğŸ“ å‰ç«¯ JSï¼ˆè¶…ç°¡ï¼‰

```html
<script>
const ws = new WebSocket("ws://localhost:8000/ws/qrl-price");

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  document.querySelector(".price").innerText = data.price;
};
</script>
```

ğŸ“Œ **ä¸ç”¨ Vue / React**
ğŸ“Œ **å¯¦ç›¤ç›£æ§é é€™æ¨£æœ€å®‰å…¨**

---

# ğŸ”’ ç‚ºä»€éº¼é€™æ¨£æ˜¯ã€Œæ­£ç¢ºå¯¦ç›¤çµ„è£ã€

âœ” Domainï¼šåªé—œå¿ƒæ•¸å€¼æ­£ç¢º
âœ” Applicationï¼šåªæ±ºå®šã€Œç”¨å“ªå€‹å¸‚å ´ã€å“ªå€‹ä¾†æºã€
âœ” Interfacesï¼šåªé¡¯ç¤ºï¼Œä¸è¨ˆç®—
âœ” HTMLï¼šé›¶å•†æ¥­é‚è¼¯

ğŸ‘‰ **ä»»ä½•åœ°æ–¹å£æ‰ï¼Œéƒ½ä¸æœƒå½±éŸ¿ä¸‹å–®é‚è¼¯**

---

# ğŸ§¾ æœ€å°å¯¦ç›¤é é¢æ¸…å–®ï¼ˆQRLï¼‰

| é …ç›®             | æ˜¯å¦ |
| -------------- | -- |
| çœŸå¯¦åƒ¹æ ¼ï¼ˆRESTï¼‰     | âœ…  |
| ç²¾åº¦æ­£ç¢ºï¼ˆQrlPriceï¼‰ | âœ…  |
| WS å³æ™‚æ›´æ–°        | â¬œ  |
| èˆ‡ä¸‹å–®è§£è€¦          | âœ…  |

---
