User request: Fix 500 error on production endpoint https://qrl-trading-api-545492969490.asia-southeast1.run.app/tasks/allocation while local http://localhost:8080/tasks/allocation works. Apply minimal changes per instructions.
